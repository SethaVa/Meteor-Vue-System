{"metadata":{},"options":{"plugins":[{"key":"/home/vy/Desktop/B.A.D/bad-system/node_modules/babel-plugin-transform-vue-jsx/index.js","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue","filename":"/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue","passPerPreset":false,"envName":"development","cwd":"/home/vy/Desktop/B.A.D/bad-system","root":"/home/vy/Desktop/B.A.D/bad-system","generatorOpts":{"filename":"/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue"}},"code":"var _;\n\nmodule.link(\"lodash\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 0);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 1);\nvar Notify;\nmodule.link(\"/imports/client/lib/notify\", {\n  \"default\": function (v) {\n    Notify = v;\n  }\n}, 2);\nvar wrapCurrentTime;\nmodule.link(\"/imports/client/lib/wrap-current-time\", {\n  \"default\": function (v) {\n    wrapCurrentTime = v;\n  }\n}, 3);\nvar Lookup;\nmodule.link(\"../lib/Lookup-Value\", {\n  \"default\": function (v) {\n    Lookup = v;\n  }\n}, 4);\nvar findSubject;\nmodule.link(\"/imports/modules/school/api/subject/methods\", {\n  findSubject: function (v) {\n    findSubject = v;\n  }\n}, 5);\nvar Printd;\nmodule.link(\"printd\", {\n  Printd: function (v) {\n    Printd = v;\n  }\n}, 6);\nvar toCss;\nmodule.link(\"to-css\", {\n  \"default\": function (v) {\n    toCss = v;\n  }\n}, 7);\nvar reportCSS;\nmodule.link(\"../styles/reportCss\", {\n  \"default\": function (v) {\n    reportCSS = v;\n  }\n}, 8);\nmodule.exportDefault({\n  name: 'Subject',\n  data: function () {\n    return {\n      totalAll: 0,\n      totalFulltime: 0,\n      typeOpts: Lookup.type,\n      reportDate: moment().toDate(),\n      form: {\n        type: ''\n      },\n      optionStart: {\n        shortcuts: [{\n          text: 'Today',\n          onClick: function (picker) {\n            picker.$emit('pick', new Date());\n          }\n        }, {\n          text: 'Yesterday',\n          onClick: function (picker) {\n            var date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\n            picker.$emit('pick', date);\n          }\n        }, {\n          text: 'A week ago',\n          onClick: function (picker) {\n            var date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', date);\n          }\n        }, {\n          text: 'Last month',\n          onClick: function (picker) {\n            // const end = new Date()\n            var date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', date);\n          }\n        }, {\n          text: 'Last 3 months',\n          onClick: function (picker) {\n            // const end = new Date()\n            var start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n            picker.$emit('pick', start);\n          }\n        }]\n      },\n      loading: false,\n      tableData: [],\n      titles: [{\n        label: 'Code',\n        prop: '_id'\n      }, {\n        label: 'Title',\n        prop: 'title'\n      }, {\n        label: 'Level',\n        prop: 'level'\n      }, {\n        label: 'Type',\n        prop: 'type'\n      }],\n      itemProp: false,\n      infoShow: false,\n      teacherName: '',\n      roomName: '',\n      subjectName: '',\n      timeStudy: [],\n      // classIdOpts: [],\n      // form: {\n      //   start: '',\n      //   end: '',\n      // },\n      rules: {\n        start: [{\n          required: true\n        }],\n        type: [{\n          required: true\n        }]\n      }\n    };\n  },\n  mounted: function () {\n    this.d = new Printd(); // this.getClassData()\n  },\n  methods: {\n    getData: function () {// this.tableData = []\n      // for (let i = 1; i <= 100; i++) {\n      //   this.tableData.push({\n      //     student: 'Logn Dara' + i,\n      //     gender: 'Male',\n      //     payDate: '12/03/2018',\n      //     endPayDate: '2018/2/' + i,\n      //   })\n      // }\n    },\n    handleOptChange: function (val) {\n      if (val === '2') {\n        this.itemProp = true;\n      } else {\n        this.itemProp = false;\n      }\n    },\n    // getClassData() {\n    //   lookupClass\n    //     .callPromise({})\n    //     .then(result => {\n    //       this.classIdOpts = result\n    //     })\n    //     .catch(error => {\n    //       Notify.error({ message: error })\n    //     })\n    // },\n    handleSubmit: function () {\n      var _this = this;\n\n      this.$refs['form'].validate(function (valid) {\n        if (valid) {\n          _this.loading = true; // this.form.start = wrapCurrentTime(this.form.start)\n          // this.form.start = moment(this.form.start).format('YYYY-MM-DD')\n          // let selector = {\n          //   type: { $in: this.form.type },\n          //   registerDate: { $lte: this.form.start },\n          // }\n\n          var selector = {\n            type: {\n              $in: _this.form.type\n            },\n            status: 'Active'\n          };\n          _this.totalAll = 0;\n          _this.totalFulltime = 0;\n          findSubject.callPromise({\n            selector: selector\n          }).then(function (result) {\n            if (result.length > 0) {\n              _this.tableData = result;\n\n              _.forEach(result, function (o) {\n                _this.totalAll += 1;\n\n                if (o.type == 'Full Time') {\n                  _this.totalFulltime += 1;\n                }\n              });\n            } else {\n              _this.tableData = [];\n              _this.totalAll = 0;\n              _this.totalFulltime = 0;\n            }\n\n            _this.loading = false;\n          }).catch(function (error) {\n            Notify.error({\n              message: error\n            });\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    handlePrint: function () {\n      // font-family: Times New Roman, Times, serif;\n      // font-family: Moul, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\n      var reportCSS = \"\\n      .logo>img {\\n          float:left;\\n          // position: absolute;\\n        }\\n      img{\\n         width: 140px;\\n          height: 100px;\\n      }\\n        .report-header>header{\\n          content: \\\"\\\";\\n          clear: both;\\n          // display: table;\\n        }\\n      .header {\\n          \\n          text-align: center;\\n          padding-bottom: 10px;\\n          width: 80%;\\n          margin-left:20px;\\n        }\\n        .header >.headerKhmer {\\n        \\n            font-size: 33px;\\n            font-weight: 500;\\n            padding-top: 10px;\\n            font-family: 'Moul', PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\\n        }\\n        .header >.headerEn {\\n          font-size: 25px;\\n          font-family: Times New Roman;\\n          color: darkgray;\\n         \\n        }\\n        .table-content {\\n          border-collapse: collapse;\\n          width: 100%;\\n        }\\n        .info-class {\\n          position: relative;\\n          height:10vh;\\n      }\\n\\n      .info-class>.clLeft {\\n          font-size: 14px;\\n          position: absolute;\\n          top: 35%;\\n          max-width: 20%;\\n          left: 5%;\\n      }\\n\\n      .info-class>.clCenter {\\n          font-size: 14px;\\n          position: absolute;\\n          margin-left: 10vh;\\n          top: 35%;\\n          left: 25%;\\n      }\\n\\n      .info-class>.clRight {\\n          font-size: 14px;\\n          position: absolute;\\n          left: 70%;\\n          top: 35%;\\n      }\\n      .tableShow {\\n          font-family: sans-serif;\\n          font-size: 12px;\\n          \\n      }\\n       .tableShow .table-content,\\n      th,\\n      td {\\n          // border: 1px solid #ddd;\\n           border: 0.1px solid #606266;\\n          // border-bottom: 1px solid #ddd;\\n          border-bottom: 0.1px solid #606266;\\n          padding: 5px;\\n      }\\n\\n       .tableShow th {\\n          background-color: #ddd;\\n        }\\n        \\n        .title {\\n            font-size:14px;\\n            text-align: center;\\n            font-weight: 700;\\n            color: black;\\n        }\\n\\n        .info-header {\\n            margin-top: 2vh;\\n            height: 4vh;\\n            text-align: center;\\n            font-size: 14px;\\n            font-weight: 500;\\n            font-style: initial oblique;\\n        }\\n        // hide repeat header\\n        thead\\n        {\\n            display: table-row-group;\\n        }\\n      \"; // const callback = (win, doc, node, launchPrint) => {\n      //   // trigger the printing\n      //   launchPrint(win)\n      //   // console.log(win)\n      // }\n\n      this.d.print(window.document.getElementById('tableStudent'), reportCSS);\n    },\n    formatDate: function (val) {\n      return moment(val).format('DD/MM/YYYY');\n    },\n    formatTime: function (val) {\n      var data = val.map(function (o) {\n        return moment(o).format('LT');\n      }).join('-');\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/vy/Desktop/B.A.D/bad-system/imports/modules/school/client/reports/Subject.vue"],"names":["_","module","link","v","moment","Notify","wrapCurrentTime","Lookup","findSubject","Printd","toCss","reportCSS","exportDefault","name","data","totalAll","totalFulltime","typeOpts","type","reportDate","toDate","form","optionStart","shortcuts","text","onClick","picker","$emit","Date","date","setTime","getTime","start","loading","tableData","titles","label","prop","itemProp","infoShow","teacherName","roomName","subjectName","timeStudy","rules","required","mounted","d","methods","getData","handleOptChange","val","handleSubmit","$refs","validate","valid","selector","$in","status","callPromise","then","result","length","forEach","o","catch","error","message","handlePrint","print","window","document","getElementById","formatDate","format","formatTime","map","join"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport _ from 'lodash'\nimport moment from 'moment'\n\nimport Notify from '/imports/client/lib/notify'\nimport wrapCurrentTime from '/imports/client/lib/wrap-current-time'\nimport Lookup from '../lib/Lookup-Value'\nimport { findSubject } from '/imports/modules/school/api/subject/methods'\nimport { Printd } from 'printd'\nimport toCss from 'to-css'\n// const toCss = require('to-css')\nimport reportCSS from '../styles/reportCss'\n\nexport default {\n  name: 'Subject',\n  data() {\n    return {\n      totalAll: 0,\n      totalFulltime: 0,\n      typeOpts: Lookup.type,\n      reportDate: moment().toDate(),\n\n      form: {\n        type: '',\n      },\n      optionStart: {\n        shortcuts: [\n          {\n            text: 'Today',\n            onClick(picker) {\n              picker.$emit('pick', new Date())\n            },\n          },\n          {\n            text: 'Yesterday',\n            onClick(picker) {\n              const date = new Date()\n              date.setTime(date.getTime() - 3600 * 1000 * 24)\n              picker.$emit('pick', date)\n            },\n          },\n          {\n            text: 'A week ago',\n            onClick(picker) {\n              const date = new Date()\n              date.setTime(date.getTime() - 3600 * 1000 * 24 * 7)\n              picker.$emit('pick', date)\n            },\n          },\n          {\n            text: 'Last month',\n            onClick(picker) {\n              // const end = new Date()\n              const date = new Date()\n              date.setTime(date.getTime() - 3600 * 1000 * 24 * 30)\n              picker.$emit('pick', date)\n            },\n          },\n          {\n            text: 'Last 3 months',\n            onClick(picker) {\n              // const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\n              picker.$emit('pick', start)\n            },\n          },\n        ],\n      },\n      loading: false,\n      tableData: [],\n      titles: [\n        { label: 'Code', prop: '_id' },\n        { label: 'Title', prop: 'title' },\n        { label: 'Level', prop: 'level' },\n        { label: 'Type', prop: 'type' },\n      ],\n      itemProp: false,\n      infoShow: false,\n      teacherName: '',\n      roomName: '',\n      subjectName: '',\n      timeStudy: [],\n\n      // classIdOpts: [],\n      // form: {\n      //   start: '',\n      //   end: '',\n      // },\n      rules: {\n        start: [{ required: true }],\n        type: [{ required: true }],\n      },\n    }\n  },\n  mounted() {\n    this.d = new Printd()\n\n    // this.getClassData()\n  },\n  methods: {\n    getData() {\n      // this.tableData = []\n      // for (let i = 1; i <= 100; i++) {\n      //   this.tableData.push({\n      //     student: 'Logn Dara' + i,\n      //     gender: 'Male',\n      //     payDate: '12/03/2018',\n      //     endPayDate: '2018/2/' + i,\n      //   })\n      // }\n    },\n    handleOptChange(val) {\n      if (val === '2') {\n        this.itemProp = true\n      } else {\n        this.itemProp = false\n      }\n    },\n    // getClassData() {\n    //   lookupClass\n    //     .callPromise({})\n    //     .then(result => {\n    //       this.classIdOpts = result\n    //     })\n    //     .catch(error => {\n    //       Notify.error({ message: error })\n    //     })\n    // },\n    handleSubmit() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.loading = true\n\n          // this.form.start = wrapCurrentTime(this.form.start)\n          // this.form.start = moment(this.form.start).format('YYYY-MM-DD')\n          // let selector = {\n          //   type: { $in: this.form.type },\n          //   registerDate: { $lte: this.form.start },\n          // }\n          let selector = {\n            type: { $in: this.form.type },\n            status: 'Active',\n          }\n          this.totalAll = 0\n          this.totalFulltime = 0\n          findSubject\n            .callPromise({ selector })\n            .then(result => {\n              if (result.length > 0) {\n                this.tableData = result\n\n                _.forEach(result, o => {\n                  this.totalAll += 1\n                  if (o.type == 'Full Time') {\n                    this.totalFulltime += 1\n                  }\n                })\n              } else {\n                this.tableData = []\n                this.totalAll = 0\n                this.totalFulltime = 0\n              }\n              this.loading = false\n            })\n            .catch(error => {\n              Notify.error({ message: error })\n            })\n        } else {\n          return false\n        }\n      })\n    },\n    handlePrint() {\n      // font-family: Times New Roman, Times, serif;\n      // font-family: Moul, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\n\n      const reportCSS = `\n      .logo>img {\n          float:left;\n          // position: absolute;\n        }\n      img{\n         width: 140px;\n          height: 100px;\n      }\n        .report-header>header{\n          content: \"\";\n          clear: both;\n          // display: table;\n        }\n      .header {\n          \n          text-align: center;\n          padding-bottom: 10px;\n          width: 80%;\n          margin-left:20px;\n        }\n        .header >.headerKhmer {\n        \n            font-size: 33px;\n            font-weight: 500;\n            padding-top: 10px;\n            font-family: 'Moul', PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\n        }\n        .header >.headerEn {\n          font-size: 25px;\n          font-family: Times New Roman;\n          color: darkgray;\n         \n        }\n        .table-content {\n          border-collapse: collapse;\n          width: 100%;\n        }\n        .info-class {\n          position: relative;\n          height:10vh;\n      }\n\n      .info-class>.clLeft {\n          font-size: 14px;\n          position: absolute;\n          top: 35%;\n          max-width: 20%;\n          left: 5%;\n      }\n\n      .info-class>.clCenter {\n          font-size: 14px;\n          position: absolute;\n          margin-left: 10vh;\n          top: 35%;\n          left: 25%;\n      }\n\n      .info-class>.clRight {\n          font-size: 14px;\n          position: absolute;\n          left: 70%;\n          top: 35%;\n      }\n      .tableShow {\n          font-family: sans-serif;\n          font-size: 12px;\n          \n      }\n       .tableShow .table-content,\n      th,\n      td {\n          // border: 1px solid #ddd;\n           border: 0.1px solid #606266;\n          // border-bottom: 1px solid #ddd;\n          border-bottom: 0.1px solid #606266;\n          padding: 5px;\n      }\n\n       .tableShow th {\n          background-color: #ddd;\n        }\n        \n        .title {\n            font-size:14px;\n            text-align: center;\n            font-weight: 700;\n            color: black;\n        }\n\n        .info-header {\n            margin-top: 2vh;\n            height: 4vh;\n            text-align: center;\n            font-size: 14px;\n            font-weight: 500;\n            font-style: initial oblique;\n        }\n        // hide repeat header\n        thead\n        {\n            display: table-row-group;\n        }\n      `\n      // const callback = (win, doc, node, launchPrint) => {\n      //   // trigger the printing\n      //   launchPrint(win)\n      //   // console.log(win)\n      // }\n\n      this.d.print(window.document.getElementById('tableStudent'), reportCSS)\n    },\n    formatDate(val) {\n      return moment(val).format('DD/MM/YYYY')\n    },\n    formatTime(val) {\n      let data = val\n        .map(o => {\n          return moment(o).format('LT')\n        })\n        .join('-')\n      return data\n    },\n  },\n}\n"]},"sourceType":"script","hash":"0cf16762fb6b00ed2b2c98c9880003a4bee063f7"}
