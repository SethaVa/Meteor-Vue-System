{"metadata":{},"options":{"plugins":[{"key":"/Users/rabbit/Desktop/app/bad-system/node_modules/babel-plugin-transform-vue-jsx/index.js","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"Program":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue","filename":"/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue","passPerPreset":false,"envName":"development","cwd":"/Users/rabbit/Desktop/app/bad-system","root":"/Users/rabbit/Desktop/app/bad-system","generatorOpts":{"filename":"/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue"}},"code":"var _;\n\nmodule.link(\"lodash\", {\n  \"default\": function (v) {\n    _ = v;\n  }\n}, 0);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 1);\nvar wrapCurrentDate;\nmodule.link(\"/imports/client/lib/wrap-current-time\", {\n  \"default\": function (v) {\n    wrapCurrentDate = v;\n  }\n}, 2);\nvar Printd;\nmodule.link(\"printd\", {\n  Printd: function (v) {\n    Printd = v;\n  }\n}, 3);\nvar Notify;\nmodule.link(\"/imports/client/lib/notify\", {\n  \"default\": function (v) {\n    Notify = v;\n  }\n}, 4);\nvar Lookup;\nmodule.link(\"../lib/Lookup-Value\", {\n  \"default\": function (v) {\n    Lookup = v;\n  }\n}, 5);\nvar lookupType;\nmodule.link(\"/imports/utils/lookup-methods\", {\n  lookupType: function (v) {\n    lookupType = v;\n  }\n}, 6);\nvar findMonthlyReport;\nmodule.link(\"/imports/modules/school/api/Income/methods\", {\n  findMonthlyReport: function (v) {\n    findMonthlyReport = v;\n  }\n}, 7);\n\nvar numeral = require('numeral');\n\nmodule.exportDefault({\n  data: function () {\n    return {\n      loading: false,\n      docOpts: Lookup.type,\n      tableData: [],\n      totalUsd: 0,\n      totalKhr: 0,\n      daily: 'Daily Report',\n      usd: 0,\n      khr: 0,\n      reportDate: moment().toDate(),\n      titles: [{\n        label: 'Student',\n        prop: 'student'\n      }, {\n        label: 'Gender',\n        prop: 'gender',\n        width: '100px'\n      }, {\n        label: 'Pay Date',\n        prop: 'payDate'\n      }, {\n        label: 'End Date',\n        prop: 'endPayDate'\n      }],\n      form: {\n        opts: moment().toDate()\n      },\n      rules: {\n        opts: [{\n          required: true\n        }]\n      }\n    };\n  },\n  mounted: function () {\n    this.d = new Printd(); // this.getTypeData()\n  },\n  methods: {\n    getTypeData: function () {\n      var _this = this;\n\n      lookupType.callPromise().then(function (result) {\n        _this.docOpts = result;\n      }).catch(function (error) {\n        Notify.error({\n          message: error\n        });\n      });\n    },\n    handleSubmit: function () {\n      var _this2 = this;\n\n      this.loading = true;\n      var sDate = wrapCurrentDate(moment(this.form.opts));\n      sDate = moment(sDate).format('YYYY-MM');\n      var eDate = wrapCurrentDate(moment(this.form.opts).add(1, 'months'));\n      eDate = moment(eDate).format('YYYY-MM');\n      var selector = {\n        tranDate: {\n          $gte: new Date(sDate),\n          $lte: new Date(eDate)\n        }\n      };\n      this.tableData = [];\n      this.tableInEx = [];\n      this.totalUsd = 0;\n      this.totalKhr = 0; // let currentDate = wrapCurrentDate(this.form.opts)\n      // currentDate = this.formatDate(currentDate)\n\n      findMonthlyReport.callPromise({\n        selector: selector\n      }).then(function (result) {\n        if (result) {\n          _this2.tableData = result;\n\n          _.forEach(result, function (o) {\n            _this2.totalUsd += o.totalUsd;\n            _this2.totalKhr += o.totalKhr;\n          });\n        }\n\n        _this2.loading = false;\n      }).catch(function (error) {\n        Notify.error({\n          message: error\n        });\n      }); // // Income And Expend\n      // let selectorInEx = {\n      //   tranDate: {\n      //     $gte: new Date(sDate),\n      //     $lte: new Date(eDate),\n      //   },\n      // }\n    },\n    handlePrint: function () {\n      var reportCSS = \"\\n      .logo>img {\\n          float:left;\\n          // position: absolute;\\n        }\\n      img{\\n         width: 140px;\\n          height: 100px;\\n      }\\n        .report-header>header{\\n          content: \\\"\\\";\\n          clear: both;\\n          // display: table;\\n        }\\n      .header {\\n          \\n          text-align: center;\\n          padding-bottom: 10px;\\n          width: 80%;\\n          margin-left:20px;\\n        }\\n        .header >.headerKhmer {\\n        \\n            font-size: 30px;\\n             color: darkgray;\\n            font-weight: 500;\\n            padding-top: 10px;\\n            font-family: 'Moul', PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\\n        }\\n        .header >.headerEn {\\n          font-size: 25px;\\n          font-family: Times New Roman;\\n          color: darkgray;\\n         \\n        }\\n        .table-content {\\n          border-collapse: collapse;\\n          width: 100%;\\n        }\\n        .info-class {\\n          position: relative;\\n          height:10vh;\\n      }\\n\\n      .info-class>.clLeft {\\n          font-size: 14px;\\n          position: absolute;\\n          top: 35%;\\n          max-width: 20%;\\n          left: 5%;\\n      }\\n\\n      .info-class>.clCenter {\\n          font-size: 14px;\\n          position: absolute;\\n          margin-left: 10vh;\\n          top: 35%;\\n          left: 25%;\\n      }\\n\\n      .info-class>.clRight {\\n          font-size: 14px;\\n          position: absolute;\\n          left: 70%;\\n          top: 35%;\\n      }\\n      .tableShow {\\n          font-family: sans-serif;\\n          font-size: 12px;\\n          \\n      }\\n       .tableShow .table-content,\\n      th,\\n      td {\\n          // border: 1px solid #ddd;\\n           border: 0.1px solid #606266;\\n          // border-bottom: 1px solid #ddd;\\n          border-bottom: 0.1px solid #606266;\\n          padding: 5px;\\n      }\\n\\n       .tableShow th {\\n          background-color: #ddd;\\n        }\\n        \\n        .title {\\n            font-size:14px;\\n            text-align: center;\\n            font-weight: 700;\\n            color: black;\\n        }\\n\\n        .info-header {\\n            margin-top: 2vh;\\n            height: 4vh;\\n            text-align: center;\\n            font-size: 14px;\\n            font-weight: 500;\\n            font-style: initial oblique;\\n        }\\n        // hide repeat header\\n        thead\\n        {\\n            display: table-row-group;\\n        }\\n      \";\n      this.d.print(document.getElementById('tableStudent'), reportCSS);\n    },\n    formatDate: function (val) {\n      return moment(val).format('L');\n    },\n    formatNum: function (val) {\n      return numeral(val).format('0,0.00');\n    },\n    // function loop Date\n    loopDate: function (from, to) {\n      var data = [];\n\n      for (var m = from; m < to; m.setMonth(m.getMonth() + 1)) {\n        data.push({\n          date: this.formatDate(m)\n        });\n      }\n\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/Users/rabbit/Desktop/app/bad-system/imports/modules/school/client/reports/MonthlyReport.vue"],"names":["_","module","link","v","moment","wrapCurrentDate","Printd","Notify","Lookup","lookupType","findMonthlyReport","numeral","require","exportDefault","data","loading","docOpts","type","tableData","totalUsd","totalKhr","daily","usd","khr","reportDate","toDate","titles","label","prop","width","form","opts","rules","required","mounted","d","methods","getTypeData","callPromise","then","result","catch","error","message","handleSubmit","sDate","format","eDate","add","selector","tranDate","$gte","Date","$lte","tableInEx","forEach","o","handlePrint","reportCSS","print","document","getElementById","formatDate","val","formatNum","loopDate","from","to","m","setMonth","getMonth","push","date"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport _ from 'lodash'\nimport moment from 'moment'\nimport wrapCurrentDate from '/imports/client/lib/wrap-current-time'\nimport { Printd } from 'printd'\nimport Notify from '/imports/client/lib/notify'\nimport Lookup from '../lib/Lookup-Value'\nimport { lookupType } from '/imports/utils/lookup-methods'\n//\nimport { findMonthlyReport } from '/imports/modules/school/api/Income/methods'\n\nconst numeral = require('numeral')\nexport default {\n  data() {\n    return {\n      loading: false,\n      docOpts: Lookup.type,\n      tableData: [],\n      totalUsd: 0,\n      totalKhr: 0,\n      daily: 'Daily Report',\n      usd: 0,\n      khr: 0,\n      reportDate: moment().toDate(),\n      titles: [\n        { label: 'Student', prop: 'student' },\n        { label: 'Gender', prop: 'gender', width: '100px' },\n        { label: 'Pay Date', prop: 'payDate' },\n        { label: 'End Date', prop: 'endPayDate' },\n      ],\n      form: {\n        opts: moment().toDate(),\n      },\n      rules: {\n        opts: [{ required: true }],\n      },\n    }\n  },\n  mounted() {\n    this.d = new Printd()\n    // this.getTypeData()\n  },\n  methods: {\n    getTypeData() {\n      lookupType\n        .callPromise()\n        .then(result => {\n          this.docOpts = result\n        })\n        .catch(error => {\n          Notify.error({ message: error })\n        })\n    },\n\n    handleSubmit() {\n      this.loading = true\n      let sDate = wrapCurrentDate(moment(this.form.opts))\n      sDate = moment(sDate).format('YYYY-MM')\n      let eDate = wrapCurrentDate(moment(this.form.opts).add(1, 'months'))\n      eDate = moment(eDate).format('YYYY-MM')\n      let selector = {\n        tranDate: {\n          $gte: new Date(sDate),\n          $lte: new Date(eDate),\n        },\n      }\n      this.tableData = []\n      this.tableInEx = []\n      this.totalUsd = 0\n      this.totalKhr = 0\n\n      // let currentDate = wrapCurrentDate(this.form.opts)\n      // currentDate = this.formatDate(currentDate)\n      findMonthlyReport\n        .callPromise({ selector })\n        .then(result => {\n          if (result) {\n            this.tableData = result\n            _.forEach(result, o => {\n              this.totalUsd += o.totalUsd\n              this.totalKhr += o.totalKhr\n            })\n          }\n          this.loading = false\n        })\n        .catch(error => {\n          Notify.error({ message: error })\n        })\n\n      // // Income And Expend\n      // let selectorInEx = {\n      //   tranDate: {\n      //     $gte: new Date(sDate),\n      //     $lte: new Date(eDate),\n      //   },\n      // }\n    },\n    handlePrint() {\n      const reportCSS = `\n      .logo>img {\n          float:left;\n          // position: absolute;\n        }\n      img{\n         width: 140px;\n          height: 100px;\n      }\n        .report-header>header{\n          content: \"\";\n          clear: both;\n          // display: table;\n        }\n      .header {\n          \n          text-align: center;\n          padding-bottom: 10px;\n          width: 80%;\n          margin-left:20px;\n        }\n        .header >.headerKhmer {\n        \n            font-size: 30px;\n             color: darkgray;\n            font-weight: 500;\n            padding-top: 10px;\n            font-family: 'Moul', PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif !important;\n        }\n        .header >.headerEn {\n          font-size: 25px;\n          font-family: Times New Roman;\n          color: darkgray;\n         \n        }\n        .table-content {\n          border-collapse: collapse;\n          width: 100%;\n        }\n        .info-class {\n          position: relative;\n          height:10vh;\n      }\n\n      .info-class>.clLeft {\n          font-size: 14px;\n          position: absolute;\n          top: 35%;\n          max-width: 20%;\n          left: 5%;\n      }\n\n      .info-class>.clCenter {\n          font-size: 14px;\n          position: absolute;\n          margin-left: 10vh;\n          top: 35%;\n          left: 25%;\n      }\n\n      .info-class>.clRight {\n          font-size: 14px;\n          position: absolute;\n          left: 70%;\n          top: 35%;\n      }\n      .tableShow {\n          font-family: sans-serif;\n          font-size: 12px;\n          \n      }\n       .tableShow .table-content,\n      th,\n      td {\n          // border: 1px solid #ddd;\n           border: 0.1px solid #606266;\n          // border-bottom: 1px solid #ddd;\n          border-bottom: 0.1px solid #606266;\n          padding: 5px;\n      }\n\n       .tableShow th {\n          background-color: #ddd;\n        }\n        \n        .title {\n            font-size:14px;\n            text-align: center;\n            font-weight: 700;\n            color: black;\n        }\n\n        .info-header {\n            margin-top: 2vh;\n            height: 4vh;\n            text-align: center;\n            font-size: 14px;\n            font-weight: 500;\n            font-style: initial oblique;\n        }\n        // hide repeat header\n        thead\n        {\n            display: table-row-group;\n        }\n      `\n      this.d.print(document.getElementById('tableStudent'), reportCSS)\n    },\n\n    formatDate(val) {\n      return moment(val).format('L')\n    },\n    formatNum(val) {\n      return numeral(val).format('0,0.00')\n    },\n    // function loop Date\n    loopDate(from, to) {\n      let data = []\n\n      for (let m = from; m < to; m.setMonth(m.getMonth() + 1)) {\n        data.push({ date: this.formatDate(m) })\n      }\n\n      return data\n    },\n  },\n}\n"]},"sourceType":"script","hash":"b7a796190da728ad9d23114f29c148c92cca6c02"}
